// универсальный стартовый код для любых ARM-микроконтроллеров
// скопипащен из руководства QuantumLeaps по использованию GNU toolchain

// этот стартовый код должен быть слинкован на начало ПЗУ,
// которое не обязательно начинается с нулевого адреса

.text // сегмент кода
.thumb // Cortex-M умеет только Thumb режим
//.code 32 // раскомментировать для ARM7TDMI (?)

//.func _vector
_vector:	// таблица векторов прерываний/исключений
// используется команда относительного перехода,
// т.к. она корректно работает при стартовом ремапинге памяти
	B _reset	// Reset                 // Сброс
	B .			// Undefined Instruction // Неизвестная инструкция
	B .			// Software Interrupt    // Программное прерывание
	B .			// Prefetch Abort        // Сбой предвыборки
	B .			// Data Abort            // Сбой по данным
	B .			// Reserved              // зарезервировано
	B .			// IRQ                   // Прерывание
	B .			// FIQ                   // Быстрое прерывание
//.endfunc

// строка копирайта, конец дополняется до границы машинного слова
_copyright:
.string "(c) Azbuka ARMaturschika"
.align 4

//.thumb_func
_reset:		// сюда передается управление при сбросе
	B .

.end
